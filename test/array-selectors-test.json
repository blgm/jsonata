[
    {
        "name": "testdata1",
        "data": {
            "foo": {
                "bar": 42,
                "blah": [
                    {
                        "baz": {
                            "fud": "hello"
                         }
                    },
                    {
                         "baz": {
                             "fud": "world"
                         }
                    },
                    {
                        "bazz": "gotcha"
                    }
                ],
                "blah.baz": "here"
            },
            "bar": 98
        }
    },
    {
        "name": "testdata2",
        "data": [
            [
                1,
                2
            ],
            [
                3,
                4
            ]
        ]
    },
    {
        "name": "simple array selectors",
        "group": [
            {
                "expression": "nest0.nest1[0]",
                "expected": [1, 3, 5, 6],
                "data": [
                    {
                        "nest0": [
                            {
                                "nest1": [1, 2]
                            },
                            {
                                "nest1": [3, 4]
                            }
                        ]
                    },
                    {
                        "nest0": [
                            {
                                "nest1": [5]
                            },
                            {
                                "nest1": [6]
                            }
                        ]
                    }
                ]
            },
            {
                "expression": "foo.blah[0].baz.fud",
                "expected": "hello",
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "foo.blah[1].baz.fud",
                "expected": "world",
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "foo.blah[-1].bazz",
                "expected": "gotcha",
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "(foo.blah)[1].baz.fud",
                "expected": "world",
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "foo.blah.baz.fud[0]",
                "expected": ["hello", "world"],
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "foo.blah.baz.fud[-1]",
                "expected": ["hello", "world"],
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "(foo.blah.baz.fud)[0]",
                "expected": "hello",
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "(foo.blah.baz.fud)[1]",
                "expected": "world",
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "(foo.blah.baz.fud)[5 * 0.2]",
                "expected": "world",
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "(foo.blah.baz.fud)[-1]",
                "expected": "world",
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "(foo.blah.baz.fud)[-2]",
                "expected": "hello",
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "(foo.blah.baz.fud)[2-4]",
                "expected": "hello",
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "(foo.blah.baz.fud)[-(4-2)]",
                "expected": "hello",
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "(foo.blah.baz.fud)[$$.foo.bar / 30]",
                "expected": "world",
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "foo.blah[0].baz",
                "expected": {"fud": "hello"},
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "foo.blah.baz[0]",
                "expected": [{"fud": "hello"}, {"fud": "world"}],
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "(foo.blah.baz)[0]",
                "expected": {"fud": "hello"},
                "data": {"$ref": "testdata1"}
            },
            {
                "expression": "$[0]",
                "expected": [1, 2],
                "data": {"$ref": "testdata2"}
            },
            {
                "expression": "$[1]",
                "expected": [3, 4],
                "data": {"$ref": "testdata2"}
            },
            {
                "expression": "$[-1]",
                "expected": [3, 4],
                "data": {"$ref": "testdata2"}
            },
            {
                "expression": "$[1][0]",
                "expected": 3,
                "data": {"$ref": "testdata2"}
            },
            {
                "expression": "$[1.1][0.9]",
                "expected": 3,
                "data": {"$ref": "testdata2"}
            }
        ]
    },
    {
        "name": "multiple array selectors",
        "group": [
            {
                "expression": "[1..10][[1..3,8,-1]]",
                "expected": [2, 3, 4, 9, 10]
            },
            {
                "expression": "[1..10][[1..3,8,5]]",
                "expected": [2, 3, 4, 6, 9]
            },
            {
                "expression": "[1..10][[1..3,8,false]]",
                "expected": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
            }
        ]
    }
]